 version: '3.8'
 services:

  postgres-server:
   image: postgres:latest
   restart: always
   environment:
    POSTGRES_USER: zabbix
    POSTGRES_PASSWORD: zabbix
    POSTGRES_DB: zabbix
    PG_DATA: /var/lib/postgresql/data/pgdata

  zabbix-server:
   image: zabbix/zabbix-server-pgsql:ubuntu-latest
   restart: always
   environment:
    POSTGRES_USER: zabbix
    POSTGRES_PASSWORD: zabbix
    POSTGRES_DB: zabbix
   depends_on:
    - postgres-server
   volumes:
    - /usr/lib/zabbix/alertscripts:/usr/lib/zabbix/alertscripts

  zabbix-web:
   image: zabbix/zabbix-web-nginx-pgsql:ubuntu-latest
   restart: always
   environment:
    POSTGRES_USER: zabbix
    POSTGRES_PASSWORD: zabbix
    POSTGRES_DB: zabbix
    ZBX_SERVER_HOST: zabbix-server
   depends_on:
    - postgres-server
    - zabbix-server
   ports:
    - 8090:8080
